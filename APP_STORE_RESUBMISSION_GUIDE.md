# App Store 再申請ガイド

このガイドに従って、App Store審査のリジェクトに対応し、再申請を行います。

## 準備完了事項 ✅

### 1. アカウント削除機能（Guideline 5.1.1(v)）
- ✅ プロフィール画面に削除ボタンを実装
- ✅ 確認ダイアログを実装
- ✅ データベース削除処理を実装
- ✅ Supabase RLSポリシーを設定
- ✅ 動作確認済み

### 2. 利用規約とプライバシーポリシー
- ✅ 利用規約を作成（`public/terms.html`）
- ✅ プライバシーポリシーを作成（`public/privacy.html`）
- ✅ 24時間モデレーション対応を明記

## 再申請の手順

### ステップ1: ビルドとデプロイ

1. **アプリをビルド**
   ```bash
   npm run build
   npx cap sync ios
   ```

2. **Xcodeでアーカイブ**
   - Xcodeでプロジェクトを開く
   - Product → Archive
   - Distribute App

### ステップ2: 利用規約とプライバシーポリシーのURL

利用規約とプライバシーポリシーは以下のURLでアクセスできます：

**重要：** これらのファイルをWebサーバーにアップロードし、公開URLを取得してください。

例：
- 利用規約: `https://livme.net/terms.html`
- プライバシーポリシー: `https://livme.net/privacy.html`

または、Capacitorアプリ内でアクセスする場合：
- 利用規約: アプリ内で `capacitor://localhost/terms.html` として表示
- プライバシーポリシー: アプリ内で `capacitor://localhost/privacy.html` として表示

### ステップ3: App Store Connectの設定

1. **App Store Connectにログイン**
   - https://appstoreconnect.apple.com

2. **アプリを選択**
   - 「マイApp」→ LiVME を選択

3. **App情報を更新**
   - 「App情報」タブを開く
   - 以下のURLを設定：
     - **プライバシーポリシーURL**: `https://livme.net/privacy.html`（実際のURLに変更）
     - **利用規約URL**: `https://livme.net/terms.html`（実際のURLに変更）
     - **サポートURL**: サポートページのURLまたはメールアドレス
   - 保存

4. **審査に関する注記を追加**
   - 「App審査情報」セクションを開く
   - 「審査に関する注記」欄に、`app_store_review_notes.md`の内容をコピー＆ペースト
   - **重要:** `[あなたのサポートメールアドレス]` を実際のメールアドレスに置き換える

### ステップ4: 審査に関する注記の記載内容

以下の内容を「審査に関する注記」に記載してください：

---

**Guideline 5.1.2 - App Tracking Transparencyについて**

このアプリはユーザーのトラッキングを一切行っておりません。
- サードパーティの広告SDKやトラッキングツールは使用していません
- 分析ツール（Google Analytics等）も使用していません
- ユーザーデータは自社のSupabaseデータベースにのみ保存され、第三者と共有することはありません
- アプリはライブイベント情報の管理とユーザー間のフォロー機能のみを提供しています

**Guideline 5.1.1(v) - アカウント削除機能について**

アカウント削除機能を実装済みです：
- ユーザーはプロフィール画面の下部にある「アカウントを削除」ボタンからアカウントを削除できます
- 削除前に確認ダイアログが表示され、アカウントが復元できないことを明示しています
- アカウント削除時に以下のデータがすべて削除されます：
  - ユーザープロフィール情報
  - 作成したライブイベント情報
  - ライブイベント参加履歴
  - フォロー/フォロワー関係
- 削除後は自動的にサインアウトされます

**Guideline 1.2 - ユーザー生成コンテンツのモデレーションについて**

コンテンツモデレーション体制を整備しています：
- 利用規約において、不適切なコンテンツの投稿を禁止しています
- 不適切なコンテンツの報告があった場合、24時間以内に確認・対応します
- 現在のアプリの性質上、ユーザーが投稿できるコンテンツは限定的です：
  - プロフィール情報（名前、自己紹介文、プロフィール画像）
  - ライブイベント情報（アーティスト名、会場名、日時）
- 今後のアップデートで、ユーザー通報機能とブロック機能の実装を予定しています
- サポートメール: [あなたのサポートメールアドレス]

---

### ステップ5: 再申請

1. **App Store Connectで審査に再提出**
   - 「バージョン」タブを開く
   - 「審査に提出」ボタンをクリック
   - 確認画面で内容を確認
   - 提出

2. **審査状況を確認**
   - App Store Connectで審査状況を確認
   - 通常、1-3日で審査結果が通知されます

## チェックリスト

再申請前に以下を確認してください：

- [ ] アプリをビルド・アーカイブ済み
- [ ] 利用規約とプライバシーポリシーが公開URL経由でアクセス可能
- [ ] App Store Connectに利用規約URLとプライバシーポリシーURLを設定
- [ ] サポートメールアドレスを設定
- [ ] 審査に関する注記を記載（サポートメールアドレスを実際のアドレスに置き換え）
- [ ] アカウント削除機能の動作確認済み
- [ ] Supabase RLSポリシーが設定済み

## 補足事項

### 今後のアップデートで実装予定の機能

もし今回の再申請でGuideline 1.2（コンテンツモデレーション）の対応が不十分と判断された場合、以下の機能を実装してください：

1. **ユーザー通報機能**
   - プロフィール画面に「通報」ボタンを追加
   - 通報理由を選択（スパム、不適切な内容、など）
   - 運営者にメール通知

2. **ユーザーブロック機能**
   - プロフィール画面に「ブロック」ボタンを追加
   - ブロックしたユーザーを非表示
   - ブロックリストの管理画面

これらの機能が必要になった場合は、再度実装を行います。

## サポート連絡先

審査中に質問があった場合の連絡先：
- メール: [あなたのサポートメールアドレス]

---

以上
